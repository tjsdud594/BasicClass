<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button onclick="data_check()" id="btn" name="btn">긁어오기</button>
    <button onclick="chart()" id="btn" name="btn">차트만들기</button>
    <button onclick="drawchart()">차트보이기</button>
    <br><hr><br>
    <div id="demo"></div>
    <br><hr><br>
    <div>
        <h2>버튼 종류에 따른 구독자수 합 및 비율</h2>
        <div id="view1"></div>
        <div id="view2"></div>
    </div>

    <br><hr><br>
    <div>
        <h2>버튼 종류에 따른 조회수 평균</h2>
        <div id="view3"></div>
        <div id="view4"></div>
    </div>

    <script>
        function data_check() {

            const xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = this.responseText;
                    console.log(data)
                    document.getElementById("demo").innerText = data;
                };
            };
            xhttp.open("GET", "/box");
            xhttp.send();
        }
        function chart(){
            const xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = this.responseText;
                    console.log(data)
                    document.getElementById("demo").innerText = data;
                };
            };
            xhttp.open("GET", "/chart");
            xhttp.send();
            console.log("hello")
        }
        function drawchart(){
            graph_img1 = "./static/image/save1.png"
            document.getElementById("view1").innerHTML = '<img src="'+graph_img1+'">';
            graph_img1 = "./static/image/save2.png"
            document.getElementById("view2").innerHTML = '<img src="'+graph_img1+'">';

            graph_img2 = "./static/image/save3.png"
            document.getElementById("view3").innerHTML = '<img src="'+graph_img2+'">';
            graph_img2 = "./static/image/save4.png"
            document.getElementById("view4").innerHTML = '<img src="'+graph_img2+'">';
        }
    </script>
</body>
</html>